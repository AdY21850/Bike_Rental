import{r as e}from"./vendor-NPusSLVZ.es.js";let o=12;async function r(e){if("undefined"!=typeof window&&window.location.origin.includes("qprod."))try{await new Promise(e=>setTimeout(e,5e3)),await t(window.location.origin,e)}catch(e){console.error("Error starting stream:",e)}}async function t(e,t){var n;if("undefined"!=typeof window){let i=new URL(`sdui/${t}/dev/signature/stream`,e).toString(),a="";try{console.log(`Requesting stream from: ${i}`);let e=await fetch(i,{method:"GET"});if(!e.ok&&o){console.error(`HTTP Error: ${e.status}`),o--,await r(t);return}if(!o){console.error("Could not connect to SDUI hot reload stream");return}let l=null==(n=e.body)?void 0:n.getReader(),d=new TextDecoder("utf-8");if(!l)throw Error("No reader available on response body");for(;;){let{value:e,done:o}=await l.read();if(o)break;if(e){let o=d.decode(e).trim();a&&a!==o&&window.location.reload(),a=o}}console.log("Stream closed by server.")}catch(e){console.error(`SDUI hot reload connection failed: ${e}`),await r(t)}}}let n=Object.freeze(Object.defineProperty({__proto__:null,HotReload:function(o){return e.useEffect(()=>{"www.linkedin.com"!==window.location.host&&r(o.name)},[o.name]),null}},Symbol.toStringTag,{value:"Module"}));export{n as C};